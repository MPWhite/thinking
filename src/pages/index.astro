---
import { getCollection } from 'astro:content';
import '../styles/theme.css';

const posts = (await getCollection('blog'))
  .filter(post => !post.data.draft)
  .sort((a, b) => b.data.date.getTime() - a.data.date.getTime());
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="thinking.sh â€” experimental field notes on code, clarity, and craft.">
  <title>thinking.sh</title>
</head>
<body>
  <main class="glass-shell">
    <header class="site-header">
      <h1 class="headline">thinking.sh</h1>
    </header>

    <section class="post-list">
      <p class="section-title">Latest entries</p>
      <ul class="post-grid">
        {posts.map(post => (
          <li class="post-card">
            <a class="post-card__link" href={`/blog/${post.slug}`}>
              <span class="post-card__meta">
                <time>{post.data.date.toISOString().split('T')[0]}</time>
                <span class="post-card__spark" aria-hidden="true"></span>
              </span>
              <h2 class="post-card__title">{post.data.title}</h2>
              <p class="post-card__excerpt">{post.data.description}</p>
            </a>
          </li>
        ))}
      </ul>
    </section>
  </main>
</body>
</html>
